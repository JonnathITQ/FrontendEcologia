<app-sidebar-admin></app-sidebar-admin>
<div class="main-content">
    <div class="profile-container">
        <div class="profile-header">
            <h1>Mi Perfil</h1>
            <button class="btn-edit" (click)="toggleEdit()" *ngIf="!isEdit">
                <i class="bi bi-pencil"></i> Editar Perfil
            </button>
        </div>

        <div class="profile-card">
            <div class="profile-avatar-section">
                <div class="avatar-wrapper">
                    <img *ngIf="admin.imagen" [src]="url + 'verImagenAdmin/' + admin.imagen" alt="Profile"
                        class="avatar-img">
                    <span *ngIf="!admin.imagen" class="avatar-placeholder">{{ admin.nombre.charAt(0) }}</span>

                    <div class="avatar-overlay" *ngIf="isEdit">
                        <label for="fileInput" class="upload-icon">
                            <i class="bi bi-camera"></i>
                        </label>
                        <input type="file" id="fileInput" (change)="onFileSelected($event)" accept="image/*" hidden>
                    </div>
                </div>
                <h2 class="profile-name">{{ admin.nombre }} {{ admin.apellido }}</h2>
                <p class="profile-role">Administrador</p>
            </div>

            <div class="profile-details" *ngIf="!isEdit">
                <div class="detail-item">
                    <label>Cédula</label>
                    <p>{{ admin.cedula }}</p>
                </div>
                <div class="detail-item">
                    <label>Correo Electrónico</label>
                    <p>{{ admin.correo }}</p>
                </div>
                <div class="detail-item">
                    <label>Seguro Médico</label>
                    <p>{{ admin.seguroMedico ? 'Sí' : 'No' }}</p>
                </div>
                <div class="detail-item">
                    <label>Tipo de Sangre</label>
                    <p>{{ admin.tipoSangre }}</p>
                </div>
                <div class="detail-item">
                    <label>Sucursal</label>
                    <p>{{ admin.sucursal }}</p>
                </div>
            </div>

            <form *ngIf="isEdit" #profileForm="ngForm" (ngSubmit)="onSubmit(profileForm)" class="edit-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre</label>
                        <input type="text" name="nombre" [(ngModel)]="admin.nombre" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Apellido</label>
                        <input type="text" name="apellido" [(ngModel)]="admin.apellido" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Cédula</label>
                        <input type="number" name="cedula" [(ngModel)]="admin.cedula" required class="form-control">
                    </div>
                    <div class="form-group">
                        <label>Correo Electrónico (No editable)</label>
                        <input type="email" name="correo" [(ngModel)]="admin.correo" readonly
                            class="form-control readonly">
                    </div>
                    <div class="form-group">
                        <label>Seguro Médico</label>
                        <select name="seguroMedico" [(ngModel)]="admin.seguroMedico" class="form-control">
                            <option [ngValue]="true">Sí</option>
                            <option [ngValue]="false">No</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Tipo de Sangre</label>
                        <select name="tipoSangre" [(ngModel)]="admin.tipoSangre" class="form-control">
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Sucursal</label>
                        <input type="text" name="sucursal" [(ngModel)]="admin.sucursal" class="form-control">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-cancel" (click)="toggleEdit()">Cancelar</button>
                    <button type="submit" class="btn-save" [disabled]="!profileForm.valid">Guardar Cambios</button>
                </div>
            </form>
        </div>
    </div>
</div>