<app-sidebar-admin></app-sidebar-admin>
<div class="main-content">
    <div class="header-section">
        <h1>Gestión de Moderadores</h1>
        <button class="btn-add" (click)="openModal()">
            <i class="bi bi-plus-lg"></i> Nuevo Moderador
        </button>
    </div>

    <div class="table-container">
        <table class="custom-table">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Cédula</th>
                    <th>Correo</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let mod of moderadores">
                    <td>{{ mod.nombre }}</td>
                    <td>{{ mod.apellido }}</td>
                    <td>{{ mod.cedula }}</td>
                    <td>{{ mod.correo }}</td>
                    <td class="actions-cell">
                        <button class="btn-icon edit" (click)="openModal(mod)" title="Editar">
                            <i class="bi bi-pencil-square"></i>
                        </button>
                        <button class="btn-icon delete" (click)="deleteModerador(mod._id)" title="Eliminar">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>
                </tr>
                <tr *ngIf="moderadores.length === 0">
                    <td colspan="5" class="empty-state">No hay moderadores registrados.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Modal -->
<div class="modal-overlay" *ngIf="showModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>{{ isEdit ? 'Editar Moderador' : 'Nuevo Moderador' }}</h2>
            <button class="close-btn" (click)="closeModal()"><i class="bi bi-x-lg"></i></button>
        </div>
        <form #modForm="ngForm" (ngSubmit)="onSubmit(modForm)">
            <div class="form-grid">
                <div class="form-group">
                    <label>Nombre</label>
                    <input type="text" name="nombre" #nombre="ngModel" [(ngModel)]="moderadorModel.nombre" required
                        class="form-control">
                </div>
                <div class="form-group">
                    <label>Apellido</label>
                    <input type="text" name="apellido" #apellido="ngModel" [(ngModel)]="moderadorModel.apellido"
                        required class="form-control">
                </div>
                <div class="form-group">
                    <label>Cédula</label>
                    <input type="number" name="cedula" #cedula="ngModel" [(ngModel)]="moderadorModel.cedula" required
                        class="form-control">
                </div>
                <div class="form-group">
                    <label>Correo</label>
                    <input type="email" name="correo" #correo="ngModel" [(ngModel)]="moderadorModel.correo" required
                        class="form-control">
                </div>
                <div class="form-group">
                    <label>Contraseña {{ isEdit ? '(Dejar en blanco para mantener)' : '' }}</label>
                    <input type="password" name="contrasenia" #contrasenia="ngModel"
                        [(ngModel)]="moderadorModel.contrasenia" [required]="!isEdit" class="form-control">
                </div>
                <div class="form-group">
                    <label>Seguro Médico</label>
                    <select name="seguroMedico" #seguroMedico="ngModel" [(ngModel)]="moderadorModel.seguroMedico"
                        class="form-control">
                        <option [ngValue]="true">Sí</option>
                        <option [ngValue]="false">No</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tipo de Sangre</label>
                    <select name="tipoSangre" #tipoSangre="ngModel" [(ngModel)]="moderadorModel.tipoSangre"
                        class="form-control">
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-cancel" (click)="closeModal()">Cancelar</button>
                <button type="submit" class="btn-save" [disabled]="!modForm.valid">Guardar</button>
            </div>
        </form>
    </div>
</div>